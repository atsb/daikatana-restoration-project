//////////////////////////////////////////////////////////////////////////////
// dk_system.cpp
//////////////////////////////////////////////////////////////////////////////

#include "dk_system.h"

//////////////////////////////////////////////////////////////////////////////
// windows
//////////////////////////////////////////////////////////////////////////////

#if _MSC_VER

#endif // _MSC_VER

//////////////////////////////////////////////////////////////////////////////
// unix
//////////////////////////////////////////////////////////////////////////////

#if __GNUG__

#include <sys/time.h>

// Return time (since arbitrary baseline) in milliseconds.
extern "C" DWORD timeGetTime (void)
{
	static struct timeval baseline = {0, 0};
	struct timeval tv;

	gettimeofday (&tv, NULL);

	if (baseline.tv_sec == 0)
	{
		baseline.tv_sec = tv.tv_sec;
		baseline.tv_usec = tv.tv_usec;
	}

	return ((tv.tv_sec - baseline.tv_sec) * 1000) + 
		((tv.tv_usec - baseline.tv_usec) / 1000);
}

#endif // __GNUG__
